(window.AMP = window.AMP || []).push({n:"amp-youtube", f:(function(AMP) {var process={env:{NODE_ENV:"production"}};function l(b,a){function f(){}f.prototype=a.prototype;b.prototype=new f;b.prototype.constructor=b;for(var d in a)if(Object.defineProperties){var e=Object.getOwnPropertyDescriptor(a,d);e&&Object.defineProperty(b,d,e)}else b[d]=a[d]};(new Date).getTime();self.log=self.log||{user:null,dev:null};var m=self.log;function p(){if(m.user)return m.user;throw Error("failed to call initLogConstructor");};var q=Object.prototype.toString;function r(b){var a,f,d=a||function(b){return b},e=b.dataset;b=Object.create(null);var c=f?f:/^param(.+)/,k;for(k in e){var h=k.match(c);if(h){var g=h[1][0].toLowerCase()+h[1].substr(1);b[d(g)]=e[k]}}return b};function t(b,a){var f;if(!a)return b;var d=b.split("#",2),e=d[0].split("?",2),c=e[0]+(e[1]?f?"?"+a+"&"+e[1]:"?"+e[1]+"&"+a:"?"+a);return c+=d[1]?"#"+d[1]:""}function u(b){var a=[],f;for(f in b){var d=b[f];if(null!=d)if(Array.isArray(d))for(var e=0;e<d.length;e++){var c=d[e];a.push(encodeURIComponent(f)+"="+encodeURIComponent(c))}else e=d,a.push(encodeURIComponent(f)+"="+encodeURIComponent(e))}return a.join("&")};var w,x="Webkit webkit Moz moz ms O o".split(" ");function y(b,a){for(var f in a){var d=b,e=a[f],c;c=d.style;var k=f;w||(w=Object.create(null));var h=w[k];if(!h){h=k;if(void 0===c[k]){var g;g=k;g=g.charAt(0).toUpperCase()+g.slice(1);a:{for(var n=0;n<x.length;n++){var v=x[n]+g;if(void 0!==c[v]){g=v;break a}}g=""}void 0!==c[g]&&(h=g)}w[k]=h}(c=h)&&(d.style[c]=e)}};function z(b){AMP.BaseElement.call(this,b);this.g=0;this.f=this.c=this.a=this.b=null}l(z,AMP.BaseElement);z.prototype.preconnectCallback=function(b){this.preconnect.preload(A(this));this.preconnect.url("https://s.ytimg.com",b);this.preconnect.url("https://i.ytimg.com",b)};z.prototype.isLayoutSupported=function(b){return"fixed"==b||"fixed-height"==b||"responsive"==b||"fill"==b||"flex-item"==b};z.prototype.renderOutsideViewport=function(){return.75};
z.prototype.buildCallback=function(){this.b=p().assert(this.element.getAttribute("data-videoid"),"The data-videoid attribute is required for <amp-youtube> %s",this.element);this.getPlaceholder()||B(this)};function A(b){return"https://www.youtube.com/embed/"+encodeURIComponent(b.b||"")+"?enablejsapi=1"}
z.prototype.layoutCallback=function(){var b=this,a=this.element.ownerDocument.createElement("iframe"),f=A(this),d=r(this.element);"autoplay"in d&&(delete d.autoplay,p().warn("Autoplay is currently not support with amp-youtube."));f=t(f,u(d));a.setAttribute("frameborder","0");a.setAttribute("allowfullscreen","true");a.src=f;this.applyFillContent(a);this.element.appendChild(a);this.a=a;this.c=new Promise(function(a){b.f=a});this.win.addEventListener("message",function(a){var c=a;if("https://www.youtube.com"==
c.origin&&c.source==b.a.contentWindow&&c.data&&("[object Object]"===q.call(c.data)||0==c.data.indexOf("{"))){var e;if("[object Object]"===q.call(c.data))e=c.data;else a:{try{e=JSON.parse(c.data);break a}catch(h){}e=void 0}c=e;void 0!==c&&("onReady"==c.event?b.f(b.a):"infoDelivery"==c.event&&c.info&&void 0!==c.info.playerState&&(b.g=c.info.playerState))}});return this.loadPromise(a).then(function(){var a=b.win,a=a.__AMP_TOP||a;return(a.services&&a.services.timer&&a.services.timer.obj).promise(300)}).then(function(){b.a.contentWindow.postMessage(JSON.stringify({event:"listening"}),
"*")}).then(function(){return b.c})};z.prototype.pauseCallback=function(){this.a&&this.a.contentWindow&&1==this.g&&this.a.contentWindow.postMessage(JSON.stringify({event:"command",func:"pauseVideo",args:""}),"*")};
function B(b){var a=b.element.ownerDocument.createElement("img"),f=b.b||"";y(a,{"object-fit":"cover",visibility:"hidden"});a.src="https://i.ytimg.com/vi/"+encodeURIComponent(f)+"/sddefault.jpg#404_is_fine";a.setAttribute("placeholder","");a.setAttribute("referrerpolicy","origin");b.applyFillContent(a);b.element.appendChild(a);b.loadPromise(a).then(function(){if(120==a.naturalWidth&&90==a.naturalHeight)throw Error("sddefault.jpg is not found");}).catch(function(){a.src="https://i.ytimg.com/vi/"+encodeURIComponent(f)+
"/hqdefault.jpg";return b.loadPromise(a)}).then(function(){y(a,{visibility:""})})}AMP.registerElement("amp-youtube",z);
})});
//# sourceMappingURL=amp-youtube-0.1.js.map